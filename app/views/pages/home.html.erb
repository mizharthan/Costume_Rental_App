<div class="container my-5">
  <div class="row">
    <div class="col d-flex justify-content-end">
    <div style="width: 300px;">
      <%= form_with url: costumes_path, method: :get, class: "d-flex" do %>
        <%= text_field_tag :query,
              params[:query],
              class: "form-control me-2",
              placeholder: "Search for costumes..." %>
        <%= submit_tag "Search", name: "", class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>
</div>

<div class="container mt-5">
  <h1 class="mb-4">Explore costumes</h1>

    <% [["Popular Costumes", @popular_costumes], ["Superhero Costumes", @superhero_costumes], ["Anime Costumes", @anime_costumes]].each do |title, costumes| %>
      <h2 class="mt-5"><%= title %></h2>
        <div class="row">
          <% costumes.each do |costume| %>
            <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-4">
              <div class="card h-100">
                <% if costume.photo.attached? %>
                  <%= cl_image_tag costume.photo.key, height: 300, width: 400, crop: :fill, class: "card-img-top img-fluid",  alt: costume.name %>
                <% else %>
                  <%= image_tag "https://via.placeholder.com/400x300?text=No+Image", class: "card-img-top", alt: "No image available" %>
                <% end %>
                <div class="card-body text-center">
                  <h5 class="card-title"><%= costume.name %></h5>
                  <p class="card-text"><%= costume.description %></p>
                  <p class="card-text"><strong>Ð„<%= costume.price_per_day %>/day</strong></p>
                  <%= link_to "View details", costume_path(costume), class: "btn btn-outline-primary" %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
    <% end %>
</div>
</div>
